var Doctum = {
    treeJson: {"tree":{"l":0,"n":"","p":"","c":[{"l":1,"n":"[Global Namespace]","p":"[Global_Namespace]","c":[{"l":2,"n":"SolrAuthorityTest","p":"SolrAuthorityTest"},{"l":2,"n":"SolrLocalTest","p":"SolrLocalTest"},{"l":2,"n":"SolrMarcTest","p":"SolrMarcTest"}]},{"l":1,"n":"KnihovnyCz","p":"KnihovnyCz","c":[{"l":2,"n":"AjaxHandler","p":"KnihovnyCz/AjaxHandler","c":[{"l":3,"n":"AbstractIlsAndUserActionFactory","p":"KnihovnyCz/AjaxHandler/AbstractIlsAndUserActionFactory"},{"l":3,"n":"Edd","p":"KnihovnyCz/AjaxHandler/Edd"},{"l":3,"n":"EddFactory","p":"KnihovnyCz/AjaxHandler/EddFactory"},{"l":3,"n":"GetACSuggestions","p":"KnihovnyCz/AjaxHandler/GetACSuggestions"},{"l":3,"n":"GetACSuggestionsFactory","p":"KnihovnyCz/AjaxHandler/GetACSuggestionsFactory"},{"l":3,"n":"GetCitations","p":"KnihovnyCz/AjaxHandler/GetCitations"},{"l":3,"n":"GetCitationsFactory","p":"KnihovnyCz/AjaxHandler/GetCitationsFactory"},{"l":3,"n":"GetHolding","p":"KnihovnyCz/AjaxHandler/GetHolding"},{"l":3,"n":"GetHoldingFactory","p":"KnihovnyCz/AjaxHandler/GetHoldingFactory"},{"l":3,"n":"GetLibrariesACSuggestions","p":"KnihovnyCz/AjaxHandler/GetLibrariesACSuggestions"},{"l":3,"n":"GetLibrariesACSuggestionsFactory","p":"KnihovnyCz/AjaxHandler/GetLibrariesACSuggestionsFactory"},{"l":3,"n":"GetObalkyKnihCoverWithoutSolr","p":"KnihovnyCz/AjaxHandler/GetObalkyKnihCoverWithoutSolr"},{"l":3,"n":"GetObalkyKnihCoverWithoutSolrFactory","p":"KnihovnyCz/AjaxHandler/GetObalkyKnihCoverWithoutSolrFactory"},{"l":3,"n":"GetUserFinesFactory","p":"KnihovnyCz/AjaxHandler/GetUserFinesFactory"},{"l":3,"n":"GetUserProfile","p":"KnihovnyCz/AjaxHandler/GetUserProfile"},{"l":3,"n":"GetZiskejEddFee","p":"KnihovnyCz/AjaxHandler/GetZiskejEddFee"},{"l":3,"n":"GetZiskejEddFeeFactory","p":"KnihovnyCz/AjaxHandler/GetZiskejEddFeeFactory"},{"l":3,"n":"HarvestWidgetsContents","p":"KnihovnyCz/AjaxHandler/HarvestWidgetsContents"},{"l":3,"n":"HarvestWidgetsContentsFactory","p":"KnihovnyCz/AjaxHandler/HarvestWidgetsContentsFactory"},{"l":3,"n":"SaveInstitutionFilter","p":"KnihovnyCz/AjaxHandler/SaveInstitutionFilter"},{"l":3,"n":"SaveInstitutionFilterFactory","p":"KnihovnyCz/AjaxHandler/SaveInstitutionFilterFactory"},{"l":3,"n":"Sfx","p":"KnihovnyCz/AjaxHandler/Sfx"},{"l":3,"n":"SfxFactory","p":"KnihovnyCz/AjaxHandler/SfxFactory"}]},{"l":2,"n":"Auth","p":"KnihovnyCz/Auth","c":[{"l":3,"n":"Manager","p":"KnihovnyCz/Auth/Manager"},{"l":3,"n":"ManagerFactory","p":"KnihovnyCz/Auth/ManagerFactory"},{"l":3,"n":"Shibboleth","p":"KnihovnyCz/Auth/Shibboleth"}]},{"l":2,"n":"Autocomplete","p":"KnihovnyCz/Autocomplete","c":[{"l":3,"n":"Highlighter","p":"KnihovnyCz/Autocomplete/Highlighter"},{"l":3,"n":"SolrAuthorityEnricher","p":"KnihovnyCz/Autocomplete/SolrAuthorityEnricher"},{"l":3,"n":"SolrAuthorityEnricherFactory","p":"KnihovnyCz/Autocomplete/SolrAuthorityEnricherFactory"},{"l":3,"n":"SolrFactoryWithFilter","p":"KnihovnyCz/Autocomplete/SolrFactoryWithFilter"},{"l":3,"n":"SolrPrefix","p":"KnihovnyCz/Autocomplete/SolrPrefix"},{"l":3,"n":"SolrPrefixHandler","p":"KnihovnyCz/Autocomplete/SolrPrefixHandler"},{"l":3,"n":"SolrPrefixSorted","p":"KnihovnyCz/Autocomplete/SolrPrefixSorted"},{"l":3,"n":"Suggester","p":"KnihovnyCz/Autocomplete/Suggester"},{"l":3,"n":"SuggestionFilter","p":"KnihovnyCz/Autocomplete/SuggestionFilter"},{"l":3,"n":"SuggestionFilterFactory","p":"KnihovnyCz/Autocomplete/SuggestionFilterFactory"}]},{"l":2,"n":"Config","p":"KnihovnyCz/Config","c":[{"l":3,"n":"PluginFactory","p":"KnihovnyCz/Config/PluginFactory"},{"l":3,"n":"PluginManager","p":"KnihovnyCz/Config/PluginManager"},{"l":3,"n":"PluginManagerFactory","p":"KnihovnyCz/Config/PluginManagerFactory"}]},{"l":2,"n":"Content","p":"KnihovnyCz/Content","c":[{"l":3,"n":"TOC","p":"KnihovnyCz/Content/TOC","c":[{"l":4,"n":"ObalkyKnih","p":"KnihovnyCz/Content/TOC/ObalkyKnih"}]},{"l":3,"n":"InvolvedLibrariesService","p":"KnihovnyCz/Content/InvolvedLibrariesService"},{"l":3,"n":"InvolvedLibrariesServiceFactory","p":"KnihovnyCz/Content/InvolvedLibrariesServiceFactory"},{"l":3,"n":"ObalkyKnihService","p":"KnihovnyCz/Content/ObalkyKnihService"},{"l":3,"n":"PageLocator","p":"KnihovnyCz/Content/PageLocator"},{"l":3,"n":"PageLocatorFactory","p":"KnihovnyCz/Content/PageLocatorFactory"}]},{"l":2,"n":"ContentBlock","p":"KnihovnyCz/ContentBlock","c":[{"l":3,"n":"AbstractDbAwaredRecordIds","p":"KnihovnyCz/ContentBlock/AbstractDbAwaredRecordIds"},{"l":3,"n":"AbstractDbAwaredRecordIdsFactory","p":"KnihovnyCz/ContentBlock/AbstractDbAwaredRecordIdsFactory"},{"l":3,"n":"DocumentTypes","p":"KnihovnyCz/ContentBlock/DocumentTypes"},{"l":3,"n":"DocumentTypesFactory","p":"KnihovnyCz/ContentBlock/DocumentTypesFactory"},{"l":3,"n":"TemplateBased","p":"KnihovnyCz/ContentBlock/TemplateBased"},{"l":3,"n":"TemplateBasedFactory","p":"KnihovnyCz/ContentBlock/TemplateBasedFactory"},{"l":3,"n":"TemplateBasedForLoggedIn","p":"KnihovnyCz/ContentBlock/TemplateBasedForLoggedIn"},{"l":3,"n":"TemplateBasedForLoggedInFactory","p":"KnihovnyCz/ContentBlock/TemplateBasedForLoggedInFactory"},{"l":3,"n":"TemplateBasedForUnloggedIn","p":"KnihovnyCz/ContentBlock/TemplateBasedForUnloggedIn"},{"l":3,"n":"TemplateBasedForUnloggedInFactory","p":"KnihovnyCz/ContentBlock/TemplateBasedForUnloggedInFactory"},{"l":3,"n":"UserList","p":"KnihovnyCz/ContentBlock/UserList"}]},{"l":2,"n":"Controller","p":"KnihovnyCz/Controller","c":[{"l":3,"n":"Plugin","p":"KnihovnyCz/Controller/Plugin","c":[{"l":4,"n":"FlashRedirect","p":"KnihovnyCz/Controller/Plugin/FlashRedirect"},{"l":4,"n":"Holds","p":"KnihovnyCz/Controller/Plugin/Holds"},{"l":4,"n":"ResultScroller","p":"KnihovnyCz/Controller/Plugin/ResultScroller"},{"l":4,"n":"ResultScrollerFactory","p":"KnihovnyCz/Controller/Plugin/ResultScrollerFactory"},{"l":4,"n":"ShortLoans","p":"KnihovnyCz/Controller/Plugin/ShortLoans"}]},{"l":3,"n":"AbstractBase","p":"KnihovnyCz/Controller/AbstractBase"},{"l":3,"n":"CartController","p":"KnihovnyCz/Controller/CartController"},{"l":3,"n":"CatalogLoginTrait","p":"KnihovnyCz/Controller/CatalogLoginTrait"},{"l":3,"n":"ContentController","p":"KnihovnyCz/Controller/ContentController"},{"l":3,"n":"ContentControllerFactory","p":"KnihovnyCz/Controller/ContentControllerFactory"},{"l":3,"n":"EmbeddedController","p":"KnihovnyCz/Controller/EmbeddedController"},{"l":3,"n":"HoldsController","p":"KnihovnyCz/Controller/HoldsController"},{"l":3,"n":"InspirationController","p":"KnihovnyCz/Controller/InspirationController"},{"l":3,"n":"LibraryCardsController","p":"KnihovnyCz/Controller/LibraryCardsController"},{"l":3,"n":"MyResearchController","p":"KnihovnyCz/Controller/MyResearchController"},{"l":3,"n":"MyResearchTrait","p":"KnihovnyCz/Controller/MyResearchTrait"},{"l":3,"n":"MyResearchZiskejEddController","p":"KnihovnyCz/Controller/MyResearchZiskejEddController"},{"l":3,"n":"MyResearchZiskejMvsController","p":"KnihovnyCz/Controller/MyResearchZiskejMvsController"},{"l":3,"n":"PortalPageController","p":"KnihovnyCz/Controller/PortalPageController"},{"l":3,"n":"RecordController","p":"KnihovnyCz/Controller/RecordController"},{"l":3,"n":"SearchController","p":"KnihovnyCz/Controller/SearchController"},{"l":3,"n":"WayfController","p":"KnihovnyCz/Controller/WayfController"},{"l":3,"n":"ZiskejAdminController","p":"KnihovnyCz/Controller/ZiskejAdminController"},{"l":3,"n":"ZiskejController","p":"KnihovnyCz/Controller/ZiskejController"},{"l":3,"n":"ZiskejEddTrait","p":"KnihovnyCz/Controller/ZiskejEddTrait"},{"l":3,"n":"ZiskejMvsTrait","p":"KnihovnyCz/Controller/ZiskejMvsTrait"}]},{"l":2,"n":"Date","p":"KnihovnyCz/Date","c":[{"l":3,"n":"Converter","p":"KnihovnyCz/Date/Converter"}]},{"l":2,"n":"Db","p":"KnihovnyCz/Db","c":[{"l":3,"n":"Row","p":"KnihovnyCz/Db/Row","c":[{"l":4,"n":"Config","p":"KnihovnyCz/Db/Row/Config"},{"l":4,"n":"CsrfToken","p":"KnihovnyCz/Db/Row/CsrfToken"},{"l":4,"n":"InstConfigs","p":"KnihovnyCz/Db/Row/InstConfigs"},{"l":4,"n":"InstSources","p":"KnihovnyCz/Db/Row/InstSources"},{"l":4,"n":"Resource","p":"KnihovnyCz/Db/Row/Resource"},{"l":4,"n":"User","p":"KnihovnyCz/Db/Row/User"},{"l":4,"n":"UserCard","p":"KnihovnyCz/Db/Row/UserCard"},{"l":4,"n":"UserList","p":"KnihovnyCz/Db/Row/UserList"},{"l":4,"n":"UserListCategories","p":"KnihovnyCz/Db/Row/UserListCategories"},{"l":4,"n":"UserListFactory","p":"KnihovnyCz/Db/Row/UserListFactory"},{"l":4,"n":"UserSettings","p":"KnihovnyCz/Db/Row/UserSettings"}]},{"l":3,"n":"Table","p":"KnihovnyCz/Db/Table","c":[{"l":4,"n":"Config","p":"KnihovnyCz/Db/Table/Config"},{"l":4,"n":"CsrfToken","p":"KnihovnyCz/Db/Table/CsrfToken"},{"l":4,"n":"InstConfigs","p":"KnihovnyCz/Db/Table/InstConfigs"},{"l":4,"n":"InstSources","p":"KnihovnyCz/Db/Table/InstSources"},{"l":4,"n":"Resource","p":"KnihovnyCz/Db/Table/Resource"},{"l":4,"n":"User","p":"KnihovnyCz/Db/Table/User"},{"l":4,"n":"UserCard","p":"KnihovnyCz/Db/Table/UserCard"},{"l":4,"n":"UserList","p":"KnihovnyCz/Db/Table/UserList"},{"l":4,"n":"UserListCategories","p":"KnihovnyCz/Db/Table/UserListCategories"},{"l":4,"n":"UserSettings","p":"KnihovnyCz/Db/Table/UserSettings"}]}]},{"l":2,"n":"Form","p":"KnihovnyCz/Form","c":[{"l":3,"n":"Handler","p":"KnihovnyCz/Form/Handler","c":[{"l":4,"n":"AskLibrary","p":"KnihovnyCz/Form/Handler/AskLibrary"}]}]},{"l":2,"n":"Geo","p":"KnihovnyCz/Geo","c":[{"l":3,"n":"Parser","p":"KnihovnyCz/Geo/Parser"}]},{"l":2,"n":"ILS","p":"KnihovnyCz/ILS","c":[{"l":3,"n":"Driver","p":"KnihovnyCz/ILS/Driver","c":[{"l":4,"n":"Aleph","p":"KnihovnyCz/ILS/Driver/Aleph"},{"l":4,"n":"KohaRest","p":"KnihovnyCz/ILS/Driver/KohaRest"},{"l":4,"n":"KohaRest1905","p":"KnihovnyCz/ILS/Driver/KohaRest1905"},{"l":4,"n":"MultiBackend","p":"KnihovnyCz/ILS/Driver/MultiBackend"},{"l":4,"n":"MultiBackendFactory","p":"KnihovnyCz/ILS/Driver/MultiBackendFactory"},{"l":4,"n":"NoILS","p":"KnihovnyCz/ILS/Driver/NoILS"},{"l":4,"n":"XCNCIP2","p":"KnihovnyCz/ILS/Driver/XCNCIP2"}]},{"l":3,"n":"Logic","p":"KnihovnyCz/ILS/Logic","c":[{"l":4,"n":"Holdings","p":"KnihovnyCz/ILS/Logic/Holdings"},{"l":4,"n":"Holds","p":"KnihovnyCz/ILS/Logic/Holds"}]},{"l":3,"n":"Service","p":"KnihovnyCz/ILS/Service","c":[{"l":4,"n":"SolrIdResolver","p":"KnihovnyCz/ILS/Service/SolrIdResolver"},{"l":4,"n":"SolrIdResolverFactory","p":"KnihovnyCz/ILS/Service/SolrIdResolverFactory"}]},{"l":3,"n":"Connection","p":"KnihovnyCz/ILS/Connection"},{"l":3,"n":"MultiConnection","p":"KnihovnyCz/ILS/MultiConnection"},{"l":3,"n":"MultiConnectionFactory","p":"KnihovnyCz/ILS/MultiConnectionFactory"}]},{"l":2,"n":"Markdown","p":"KnihovnyCz/Markdown","c":[{"l":3,"n":"InvolvedLibraries","p":"KnihovnyCz/Markdown/InvolvedLibraries","c":[{"l":4,"n":"Node","p":"KnihovnyCz/Markdown/InvolvedLibraries/Node","c":[{"l":5,"n":"InvolvedLibraries","p":"KnihovnyCz/Markdown/InvolvedLibraries/Node/InvolvedLibraries"},{"l":5,"n":"InvolvedLibrariesPlaceholder","p":"KnihovnyCz/Markdown/InvolvedLibraries/Node/InvolvedLibrariesPlaceholder"}]},{"l":4,"n":"InvolvedLibrariesBuilder","p":"KnihovnyCz/Markdown/InvolvedLibraries/InvolvedLibrariesBuilder"},{"l":4,"n":"InvolvedLibrariesExtension","p":"KnihovnyCz/Markdown/InvolvedLibraries/InvolvedLibrariesExtension"},{"l":4,"n":"InvolvedLibrariesExtensionFactory","p":"KnihovnyCz/Markdown/InvolvedLibraries/InvolvedLibrariesExtensionFactory"},{"l":4,"n":"InvolvedLibrariesParser","p":"KnihovnyCz/Markdown/InvolvedLibraries/InvolvedLibrariesParser"},{"l":4,"n":"InvolvedLibrariesRenderer","p":"KnihovnyCz/Markdown/InvolvedLibraries/InvolvedLibrariesRenderer"}]}]},{"l":2,"n":"Recommend","p":"KnihovnyCz/Recommend","c":[{"l":3,"n":"MapSelection","p":"KnihovnyCz/Recommend/MapSelection"},{"l":3,"n":"MapSelectionFactory","p":"KnihovnyCz/Recommend/MapSelectionFactory"},{"l":3,"n":"RecommendOtherPortals","p":"KnihovnyCz/Recommend/RecommendOtherPortals"},{"l":3,"n":"SideFacetsDeferred","p":"KnihovnyCz/Recommend/SideFacetsDeferred"},{"l":3,"n":"SideFacetsDeferredFactory","p":"KnihovnyCz/Recommend/SideFacetsDeferredFactory"}]},{"l":2,"n":"Record","p":"KnihovnyCz/Record","c":[{"l":3,"n":"Loader","p":"KnihovnyCz/Record/Loader"},{"l":3,"n":"LoaderFactory","p":"KnihovnyCz/Record/LoaderFactory"}]},{"l":2,"n":"RecordDriver","p":"KnihovnyCz/RecordDriver","c":[{"l":3,"n":"Feature","p":"KnihovnyCz/RecordDriver/Feature","c":[{"l":4,"n":"BibframeTrait","p":"KnihovnyCz/RecordDriver/Feature/BibframeTrait"},{"l":4,"n":"BuyLinksTrait","p":"KnihovnyCz/RecordDriver/Feature/BuyLinksTrait"},{"l":4,"n":"CitaceProTrait","p":"KnihovnyCz/RecordDriver/Feature/CitaceProTrait"},{"l":4,"n":"ObalkyKnihTrait","p":"KnihovnyCz/RecordDriver/Feature/ObalkyKnihTrait"},{"l":4,"n":"PatentTrait","p":"KnihovnyCz/RecordDriver/Feature/PatentTrait"},{"l":4,"n":"WikidataTrait","p":"KnihovnyCz/RecordDriver/Feature/WikidataTrait"}]},{"l":3,"n":"EDS","p":"KnihovnyCz/RecordDriver/EDS"},{"l":3,"n":"EdsFactory","p":"KnihovnyCz/RecordDriver/EdsFactory"},{"l":3,"n":"Search2Library","p":"KnihovnyCz/RecordDriver/Search2Library"},{"l":3,"n":"SolrAuthority","p":"KnihovnyCz/RecordDriver/SolrAuthority"},{"l":3,"n":"SolrDefault","p":"KnihovnyCz/RecordDriver/SolrDefault"},{"l":3,"n":"SolrDefaultFactory","p":"KnihovnyCz/RecordDriver/SolrDefaultFactory"},{"l":3,"n":"SolrDictionary","p":"KnihovnyCz/RecordDriver/SolrDictionary"},{"l":3,"n":"SolrDublinCore","p":"KnihovnyCz/RecordDriver/SolrDublinCore"},{"l":3,"n":"SolrLibrary","p":"KnihovnyCz/RecordDriver/SolrLibrary"},{"l":3,"n":"SolrLibraryFactory","p":"KnihovnyCz/RecordDriver/SolrLibraryFactory"},{"l":3,"n":"SolrLocal","p":"KnihovnyCz/RecordDriver/SolrLocal"},{"l":3,"n":"SolrLocalFactory","p":"KnihovnyCz/RecordDriver/SolrLocalFactory"},{"l":3,"n":"SolrMarc","p":"KnihovnyCz/RecordDriver/SolrMarc"},{"l":3,"n":"Summon","p":"KnihovnyCz/RecordDriver/Summon"},{"l":3,"n":"SummonFactory","p":"KnihovnyCz/RecordDriver/SummonFactory"}]},{"l":2,"n":"RecordTab","p":"KnihovnyCz/RecordTab","c":[{"l":3,"n":"Buy","p":"KnihovnyCz/RecordTab/Buy"},{"l":3,"n":"Cites","p":"KnihovnyCz/RecordTab/Cites"},{"l":3,"n":"DedupedRecords","p":"KnihovnyCz/RecordTab/DedupedRecords"},{"l":3,"n":"EVersion","p":"KnihovnyCz/RecordTab/EVersion"},{"l":3,"n":"HoldingsILS","p":"KnihovnyCz/RecordTab/HoldingsILS"},{"l":3,"n":"LibraryBranches","p":"KnihovnyCz/RecordTab/LibraryBranches"},{"l":3,"n":"LibraryContacts","p":"KnihovnyCz/RecordTab/LibraryContacts"},{"l":3,"n":"LibraryInfo","p":"KnihovnyCz/RecordTab/LibraryInfo"},{"l":3,"n":"LibraryServices","p":"KnihovnyCz/RecordTab/LibraryServices"},{"l":3,"n":"SfxAvailability","p":"KnihovnyCz/RecordTab/SfxAvailability"},{"l":3,"n":"StaffViewDublinCore","p":"KnihovnyCz/RecordTab/StaffViewDublinCore"},{"l":3,"n":"ZiskejBase","p":"KnihovnyCz/RecordTab/ZiskejBase"},{"l":3,"n":"ZiskejEdd","p":"KnihovnyCz/RecordTab/ZiskejEdd"},{"l":3,"n":"ZiskejEddFactory","p":"KnihovnyCz/RecordTab/ZiskejEddFactory"},{"l":3,"n":"ZiskejMvs","p":"KnihovnyCz/RecordTab/ZiskejMvs"},{"l":3,"n":"ZiskejMvsFactory","p":"KnihovnyCz/RecordTab/ZiskejMvsFactory"}]},{"l":2,"n":"Related","p":"KnihovnyCz/Related","c":[{"l":3,"n":"Links","p":"KnihovnyCz/Related/Links"},{"l":3,"n":"SolrField","p":"KnihovnyCz/Related/SolrField"}]},{"l":2,"n":"Route","p":"KnihovnyCz/Route","c":[{"l":3,"n":"RouteGenerator","p":"KnihovnyCz/Route/RouteGenerator"}]},{"l":2,"n":"Search","p":"KnihovnyCz/Search","c":[{"l":3,"n":"EDS","p":"KnihovnyCz/Search/EDS","c":[{"l":4,"n":"Backend","p":"KnihovnyCz/Search/EDS/Backend","c":[{"l":5,"n":"Connector","p":"KnihovnyCz/Search/EDS/Backend/Connector"},{"l":5,"n":"JsonListener","p":"KnihovnyCz/Search/EDS/Backend/JsonListener"}]}]},{"l":3,"n":"Factory","p":"KnihovnyCz/Search/Factory","c":[{"l":4,"n":"EdsBackendFactory","p":"KnihovnyCz/Search/Factory/EdsBackendFactory"},{"l":4,"n":"Search2BackendFactory","p":"KnihovnyCz/Search/Factory/Search2BackendFactory"},{"l":4,"n":"SolrDefaultBackendFactory","p":"KnihovnyCz/Search/Factory/SolrDefaultBackendFactory"},{"l":4,"n":"UrlQueryHelperFactory","p":"KnihovnyCz/Search/Factory/UrlQueryHelperFactory"}]},{"l":3,"n":"Favorites","p":"KnihovnyCz/Search/Favorites","c":[{"l":4,"n":"Options","p":"KnihovnyCz/Search/Favorites/Options"}]},{"l":3,"n":"Search2","p":"KnihovnyCz/Search/Search2","c":[{"l":4,"n":"Params","p":"KnihovnyCz/Search/Search2/Params"}]},{"l":3,"n":"Solr","p":"KnihovnyCz/Search/Solr","c":[{"l":4,"n":"Backend","p":"KnihovnyCz/Search/Solr/Backend","c":[{"l":5,"n":"Response","p":"KnihovnyCz/Search/Solr/Backend/Response","c":[{"l":6,"n":"Json","p":"KnihovnyCz/Search/Solr/Backend/Response/Json","c":[{"l":7,"n":"RecordCollection","p":"KnihovnyCz/Search/Solr/Backend/Response/Json/RecordCollection"}]}]},{"l":5,"n":"Connector","p":"KnihovnyCz/Search/Solr/Backend/Connector"},{"l":5,"n":"PerformanceLogger","p":"KnihovnyCz/Search/Solr/Backend/PerformanceLogger"}]},{"l":4,"n":"ChildDocDeduplicationListener","p":"KnihovnyCz/Search/Solr/ChildDocDeduplicationListener"},{"l":4,"n":"DeduplicationHelper","p":"KnihovnyCz/Search/Solr/DeduplicationHelper"},{"l":4,"n":"DeduplicationListener","p":"KnihovnyCz/Search/Solr/DeduplicationListener"},{"l":4,"n":"JsonFacetListener","p":"KnihovnyCz/Search/Solr/JsonFacetListener"},{"l":4,"n":"MultiplyingDeduplicationListener","p":"KnihovnyCz/Search/Solr/MultiplyingDeduplicationListener"},{"l":4,"n":"OneChildDocDeduplicationListener","p":"KnihovnyCz/Search/Solr/OneChildDocDeduplicationListener"},{"l":4,"n":"Params","p":"KnihovnyCz/Search/Solr/Params"},{"l":4,"n":"ParamsFactory","p":"KnihovnyCz/Search/Solr/ParamsFactory"},{"l":4,"n":"Results","p":"KnihovnyCz/Search/Solr/Results"}]},{"l":3,"n":"ParamBag","p":"KnihovnyCz/Search/ParamBag"},{"l":3,"n":"SearchRunner","p":"KnihovnyCz/Search/SearchRunner"},{"l":3,"n":"UrlQueryHelper","p":"KnihovnyCz/Search/UrlQueryHelper"}]},{"l":2,"n":"Service","p":"KnihovnyCz/Service","c":[{"l":3,"n":"CitaceProService","p":"KnihovnyCz/Service/CitaceProService"},{"l":3,"n":"CitaceProServiceFactory","p":"KnihovnyCz/Service/CitaceProServiceFactory"},{"l":3,"n":"GoogleBooksLinkService","p":"KnihovnyCz/Service/GoogleBooksLinkService"},{"l":3,"n":"GuzzleHttpService","p":"KnihovnyCz/Service/GuzzleHttpService"},{"l":3,"n":"GuzzleHttpServiceFactory","p":"KnihovnyCz/Service/GuzzleHttpServiceFactory"},{"l":3,"n":"HttpService","p":"KnihovnyCz/Service/HttpService"},{"l":3,"n":"HttpServiceFactory","p":"KnihovnyCz/Service/HttpServiceFactory"},{"l":3,"n":"LinkServiceAbstractBase","p":"KnihovnyCz/Service/LinkServiceAbstractBase"},{"l":3,"n":"LinkServiceInterface","p":"KnihovnyCz/Service/LinkServiceInterface"},{"l":3,"n":"UserSettingsService","p":"KnihovnyCz/Service/UserSettingsService"},{"l":3,"n":"UserSettingsServiceFactory","p":"KnihovnyCz/Service/UserSettingsServiceFactory"},{"l":3,"n":"WayfFilterGenerator","p":"KnihovnyCz/Service/WayfFilterGenerator"},{"l":3,"n":"WayfFilterGeneratorFactory","p":"KnihovnyCz/Service/WayfFilterGeneratorFactory"},{"l":3,"n":"ZboziLinkService","p":"KnihovnyCz/Service/ZboziLinkService"}]},{"l":2,"n":"Session","p":"KnihovnyCz/Session","c":[{"l":3,"n":"NullSessionManager","p":"KnihovnyCz/Session/NullSessionManager"}]},{"l":2,"n":"Sitemap","p":"KnihovnyCz/Sitemap","c":[{"l":3,"n":"Plugin","p":"KnihovnyCz/Sitemap/Plugin","c":[{"l":4,"n":"Index","p":"KnihovnyCz/Sitemap/Plugin/Index"},{"l":4,"n":"IndexFactory","p":"KnihovnyCz/Sitemap/Plugin/IndexFactory"}]}]},{"l":2,"n":"Validator","p":"KnihovnyCz/Validator","c":[{"l":3,"n":"DatabaseCsrf","p":"KnihovnyCz/Validator/DatabaseCsrf"},{"l":3,"n":"DatabaseCsrfFactory","p":"KnihovnyCz/Validator/DatabaseCsrfFactory"}]},{"l":2,"n":"View","p":"KnihovnyCz/View","c":[{"l":3,"n":"Helper","p":"KnihovnyCz/View/Helper","c":[{"l":4,"n":"KnihovnyCz","p":"KnihovnyCz/View/Helper/KnihovnyCz","c":[{"l":5,"n":"ContextHelp","p":"KnihovnyCz/View/Helper/KnihovnyCz/ContextHelp"},{"l":5,"n":"EscapeElementId","p":"KnihovnyCz/View/Helper/KnihovnyCz/EscapeElementId"},{"l":5,"n":"FooterLink","p":"KnihovnyCz/View/Helper/KnihovnyCz/FooterLink"},{"l":5,"n":"GeoCoords","p":"KnihovnyCz/View/Helper/KnihovnyCz/GeoCoords"},{"l":5,"n":"GoogleTagManager","p":"KnihovnyCz/View/Helper/KnihovnyCz/GoogleTagManager"},{"l":5,"n":"GoogleTagManagerFactory","p":"KnihovnyCz/View/Helper/KnihovnyCz/GoogleTagManagerFactory"},{"l":5,"n":"LibrariesApiLookfor","p":"KnihovnyCz/View/Helper/KnihovnyCz/LibrariesApiLookfor"},{"l":5,"n":"RecordDataFormatterFactory","p":"KnihovnyCz/View/Helper/KnihovnyCz/RecordDataFormatterFactory"},{"l":5,"n":"RecordLinker","p":"KnihovnyCz/View/Helper/KnihovnyCz/RecordLinker"},{"l":5,"n":"RecordLinkerFactory","p":"KnihovnyCz/View/Helper/KnihovnyCz/RecordLinkerFactory"},{"l":5,"n":"SearchTabs","p":"KnihovnyCz/View/Helper/KnihovnyCz/SearchTabs"},{"l":5,"n":"SearchTabsFactory","p":"KnihovnyCz/View/Helper/KnihovnyCz/SearchTabsFactory"},{"l":5,"n":"SplitText","p":"KnihovnyCz/View/Helper/KnihovnyCz/SplitText"},{"l":5,"n":"TextFormatter","p":"KnihovnyCz/View/Helper/KnihovnyCz/TextFormatter"},{"l":5,"n":"UserCards","p":"KnihovnyCz/View/Helper/KnihovnyCz/UserCards"},{"l":5,"n":"ZiskejEdd","p":"KnihovnyCz/View/Helper/KnihovnyCz/ZiskejEdd"},{"l":5,"n":"ZiskejMvs","p":"KnihovnyCz/View/Helper/KnihovnyCz/ZiskejMvs"}]}]}]},{"l":2,"n":"Wikidata","p":"KnihovnyCz/Wikidata","c":[{"l":3,"n":"SparqlService","p":"KnihovnyCz/Wikidata/SparqlService"},{"l":3,"n":"SparqlServiceFactory","p":"KnihovnyCz/Wikidata/SparqlServiceFactory"}]},{"l":2,"n":"Ziskej","p":"KnihovnyCz/Ziskej","c":[{"l":3,"n":"Ziskej","p":"KnihovnyCz/Ziskej/Ziskej"},{"l":3,"n":"ZiskejApiFactory","p":"KnihovnyCz/Ziskej/ZiskejApiFactory"},{"l":3,"n":"ZiskejEdd","p":"KnihovnyCz/Ziskej/ZiskejEdd"},{"l":3,"n":"ZiskejFactory","p":"KnihovnyCz/Ziskej/ZiskejFactory"},{"l":3,"n":"ZiskejMvs","p":"KnihovnyCz/Ziskej/ZiskejMvs"}]},{"l":2,"n":"Module","p":"KnihovnyCz/Module"}]},{"l":1,"n":"KnihovnyCzApi","p":"KnihovnyCzApi","c":[{"l":2,"n":"Controller","p":"KnihovnyCzApi/Controller","c":[{"l":3,"n":"Search2ApiController","p":"KnihovnyCzApi/Controller/Search2ApiController"},{"l":3,"n":"SearchApiController","p":"KnihovnyCzApi/Controller/SearchApiController"},{"l":3,"n":"SearchApiControllerFactory","p":"KnihovnyCzApi/Controller/SearchApiControllerFactory"}]},{"l":2,"n":"Formatter","p":"KnihovnyCzApi/Formatter","c":[{"l":3,"n":"ItemFormatter","p":"KnihovnyCzApi/Formatter/ItemFormatter"},{"l":3,"n":"ItemFormatterFactory","p":"KnihovnyCzApi/Formatter/ItemFormatterFactory"}]},{"l":2,"n":"Module","p":"KnihovnyCzApi/Module"}]},{"l":1,"n":"KnihovnyCzConsole","p":"KnihovnyCzConsole","c":[{"l":2,"n":"Command","p":"KnihovnyCzConsole/Command","c":[{"l":3,"n":"Util","p":"KnihovnyCzConsole/Command/Util","c":[{"l":4,"n":"ClearCacheCommand","p":"KnihovnyCzConsole/Command/Util/ClearCacheCommand"},{"l":4,"n":"ClearCacheCommandFactory","p":"KnihovnyCzConsole/Command/Util/ClearCacheCommandFactory"},{"l":4,"n":"ExpireCsrfTokensCommand","p":"KnihovnyCzConsole/Command/Util/ExpireCsrfTokensCommand"},{"l":4,"n":"ExpireCsrfTokensCommandFactory","p":"KnihovnyCzConsole/Command/Util/ExpireCsrfTokensCommandFactory"},{"l":4,"n":"ExpireUsersCommand","p":"KnihovnyCzConsole/Command/Util/ExpireUsersCommand"},{"l":4,"n":"ExpireUsersCommandFactory","p":"KnihovnyCzConsole/Command/Util/ExpireUsersCommandFactory"},{"l":4,"n":"UpdateResourcesFromSolrCommand","p":"KnihovnyCzConsole/Command/Util/UpdateResourcesFromSolrCommand"},{"l":4,"n":"UpdateResourcesFromSolrCommandFactory","p":"KnihovnyCzConsole/Command/Util/UpdateResourcesFromSolrCommandFactory"}]}]},{"l":2,"n":"Module","p":"KnihovnyCzConsole/Module"}]},{"l":1,"n":"KnihovnyCzCronApi","p":"KnihovnyCzCronApi","c":[{"l":2,"n":"Controller","p":"KnihovnyCzCronApi/Controller","c":[{"l":3,"n":"Cronjob","p":"KnihovnyCzCronApi/Controller/Cronjob"}]},{"l":2,"n":"Module","p":"KnihovnyCzCronApi/Module"}]},{"l":1,"n":"KnihovnyCzTest","p":"KnihovnyCzTest","c":[{"l":2,"n":"ILS","p":"KnihovnyCzTest/ILS","c":[{"l":3,"n":"Driver","p":"KnihovnyCzTest/ILS/Driver","c":[{"l":4,"n":"MultiBackendTest","p":"KnihovnyCzTest/ILS/Driver/MultiBackendTest"},{"l":4,"n":"XCNCIP2Test","p":"KnihovnyCzTest/ILS/Driver/XCNCIP2Test"}]}]}]}]},"treeOpenLevel":1},
    /** @var boolean */
    treeLoaded: false,
    /** @var boolean */
    listenersRegistered: false,
    autoCompleteData: null,
    /** @var boolean */
    autoCompleteLoading: false,
    /** @var boolean */
    autoCompleteLoaded: false,
    /** @var string|null */
    rootPath: null,
    /** @var string|null */
    autoCompleteDataUrl: null,
    /** @var HTMLElement|null */
    doctumSearchAutoComplete: null,
    /** @var HTMLElement|null */
    doctumSearchAutoCompleteProgressBarContainer: null,
    /** @var HTMLElement|null */
    doctumSearchAutoCompleteProgressBar: null,
    /** @var number */
    doctumSearchAutoCompleteProgressBarPercent: 0,
    /** @var autoComplete|null */
    autoCompleteJS: null,
    querySearchSecurityRegex: /([^0-9a-zA-Z:\\\\_\s])/gi,
    buildTreeNode: function (treeNode, htmlNode, treeOpenLevel) {
        var ulNode = document.createElement('ul');
        for (var childKey in treeNode.c) {
            var child = treeNode.c[childKey];
            var liClass = document.createElement('li');
            var hasChildren = child.hasOwnProperty('c');
            var nodeSpecialName = (hasChildren ? 'namespace:' : 'class:') + child.p.replace(/\//g, '_');
            liClass.setAttribute('data-name', nodeSpecialName);

            // Create the node that will have the text
            var divHd = document.createElement('div');
            var levelCss = child.l - 1;
            divHd.className = hasChildren ? 'hd' : 'hd leaf';
            divHd.style.paddingLeft = (hasChildren ? (levelCss * 18) : (8 + (levelCss * 18))) + 'px';
            if (hasChildren) {
                if (child.l <= treeOpenLevel) {
                    liClass.className = 'opened';
                }
                var spanIcon = document.createElement('span');
                spanIcon.className = 'icon icon-play';
                divHd.appendChild(spanIcon);
            }
            var aLink = document.createElement('a');

            // Edit the HTML link to work correctly based on the current depth
            aLink.href = Doctum.rootPath + child.p + '.html';
            aLink.innerText = child.n;
            divHd.appendChild(aLink);
            liClass.appendChild(divHd);

            // It has children
            if (hasChildren) {
                var divBd = document.createElement('div');
                divBd.className = 'bd';
                Doctum.buildTreeNode(child, divBd, treeOpenLevel);
                liClass.appendChild(divBd);
            }
            ulNode.appendChild(liClass);
        }
        htmlNode.appendChild(ulNode);
    },
    initListeners: function () {
        if (Doctum.listenersRegistered) {
            // Quick exit, already registered
            return;
        }
                Doctum.listenersRegistered = true;
    },
    loadTree: function () {
        if (Doctum.treeLoaded) {
            // Quick exit, already registered
            return;
        }
        Doctum.rootPath = document.body.getAttribute('data-root-path');
        Doctum.buildTreeNode(Doctum.treeJson.tree, document.getElementById('api-tree'), Doctum.treeJson.treeOpenLevel);

        // Toggle left-nav divs on click
        $('#api-tree .hd span').on('click', function () {
            $(this).parent().parent().toggleClass('opened');
        });

        // Expand the parent namespaces of the current page.
        var expected = $('body').attr('data-name');

        if (expected) {
            // Open the currently selected node and its parents.
            var container = $('#api-tree');
            var node = $('#api-tree li[data-name="' + expected + '"]');
            // Node might not be found when simulating namespaces
            if (node.length > 0) {
                node.addClass('active').addClass('opened');
                node.parents('li').addClass('opened');
                var scrollPos = node.offset().top - container.offset().top + container.scrollTop();
                // Position the item nearer to the top of the screen.
                scrollPos -= 200;
                container.scrollTop(scrollPos);
            }
        }
        Doctum.treeLoaded = true;
    },
    pagePartiallyLoaded: function (event) {
        Doctum.initListeners();
        Doctum.loadTree();
        Doctum.loadAutoComplete();
    },
    pageFullyLoaded: function (event) {
        // it may not have received DOMContentLoaded event
        Doctum.initListeners();
        Doctum.loadTree();
        Doctum.loadAutoComplete();
        // Fire the event in the search page too
        if (typeof DoctumSearch === 'object') {
            DoctumSearch.pageFullyLoaded();
        }
    },
    loadAutoComplete: function () {
        if (Doctum.autoCompleteLoaded) {
            // Quick exit, already loaded
            return;
        }
        Doctum.autoCompleteDataUrl = document.body.getAttribute('data-search-index-url');
        Doctum.doctumSearchAutoComplete = document.getElementById('doctum-search-auto-complete');
        Doctum.doctumSearchAutoCompleteProgressBarContainer = document.getElementById('search-progress-bar-container');
        Doctum.doctumSearchAutoCompleteProgressBar = document.getElementById('search-progress-bar');
        if (Doctum.doctumSearchAutoComplete !== null) {
            // Wait for it to be loaded
            Doctum.doctumSearchAutoComplete.addEventListener('init', function (_) {
                Doctum.autoCompleteLoaded = true;
                Doctum.doctumSearchAutoComplete.addEventListener('selection', function (event) {
                    // Go to selection page
                    window.location = Doctum.rootPath + event.detail.selection.value.p;
                });
                Doctum.doctumSearchAutoComplete.addEventListener('navigate', function (event) {
                    // Set selection in text box
                    if (typeof event.detail.selection.value === 'object') {
                        Doctum.doctumSearchAutoComplete.value = event.detail.selection.value.n;
                    }
                });
                Doctum.doctumSearchAutoComplete.addEventListener('results', function (event) {
                    Doctum.markProgressFinished();
                });
            });
        }
        // Check if the lib is loaded
        if (typeof autoComplete === 'function') {
            Doctum.bootAutoComplete();
        }
    },
    markInProgress: function () {
            Doctum.doctumSearchAutoCompleteProgressBarContainer.className = 'search-bar';
            Doctum.doctumSearchAutoCompleteProgressBar.className = 'progress-bar indeterminate';
            if (typeof DoctumSearch === 'object' && DoctumSearch.pageFullyLoaded) {
                DoctumSearch.doctumSearchPageAutoCompleteProgressBarContainer.className = 'search-bar';
                DoctumSearch.doctumSearchPageAutoCompleteProgressBar.className = 'progress-bar indeterminate';
            }
    },
    markProgressFinished: function () {
        Doctum.doctumSearchAutoCompleteProgressBarContainer.className = 'search-bar hidden';
        Doctum.doctumSearchAutoCompleteProgressBar.className = 'progress-bar';
        if (typeof DoctumSearch === 'object' && DoctumSearch.pageFullyLoaded) {
            DoctumSearch.doctumSearchPageAutoCompleteProgressBarContainer.className = 'search-bar hidden';
            DoctumSearch.doctumSearchPageAutoCompleteProgressBar.className = 'progress-bar';
        }
    },
    makeProgess: function () {
        Doctum.makeProgressOnProgressBar(
            Doctum.doctumSearchAutoCompleteProgressBarPercent,
            Doctum.doctumSearchAutoCompleteProgressBar
        );
        if (typeof DoctumSearch === 'object' && DoctumSearch.pageFullyLoaded) {
            Doctum.makeProgressOnProgressBar(
                Doctum.doctumSearchAutoCompleteProgressBarPercent,
                DoctumSearch.doctumSearchPageAutoCompleteProgressBar
            );
        }
    },
    loadAutoCompleteData: function (query) {
        return new Promise(function (resolve, reject) {
            if (Doctum.autoCompleteData !== null) {
                resolve(Doctum.autoCompleteData);
                return;
            }
            Doctum.markInProgress();
            function reqListener() {
                Doctum.autoCompleteLoading = false;
                Doctum.autoCompleteData = JSON.parse(this.responseText).items;
                Doctum.markProgressFinished();

                setTimeout(function () {
                    resolve(Doctum.autoCompleteData);
                }, 50);// Let the UI render once before sending the results for processing. This gives time to the progress bar to hide
            }
            function reqError(err) {
                Doctum.autoCompleteLoading = false;
                Doctum.autoCompleteData = null;
                console.error(err);
                reject(err);
            }

            var oReq = new XMLHttpRequest();
            oReq.onload = reqListener;
            oReq.onerror = reqError;
            oReq.onprogress = function (pe) {
                if (pe.lengthComputable) {
                    Doctum.doctumSearchAutoCompleteProgressBarPercent = parseInt(pe.loaded / pe.total * 100, 10);
                    Doctum.makeProgess();
                }
            };
            oReq.onloadend = function (_) {
                Doctum.markProgressFinished();
            };
            oReq.open('get', Doctum.autoCompleteDataUrl, true);
            oReq.send();
        });
    },
    /**
     * Make some progress on a progress bar
     *
     * @param number percentage
     * @param HTMLElement progressBar
     * @return void
     */
    makeProgressOnProgressBar: function(percentage, progressBar) {
        progressBar.className = 'progress-bar';
        progressBar.style.width = percentage + '%';
        progressBar.setAttribute(
            'aria-valuenow', percentage
        );
    },
    searchEngine: function (query, record) {
        if (typeof query !== 'string') {
            return '';
        }
        // replace all (mode = g) spaces and non breaking spaces (\s) by pipes
        // g = global mode to mark also the second word searched
        // i = case insensitive
        // how this function works:
        // First: search if the query has the keywords in sequence
        // Second: replace the keywords by a mark and leave all the text in between non marked
        
        if (record.match(new RegExp('(' + query.replace(/\s/g, ').*(') + ')', 'gi')) === null) {
            return '';// Does not match
        }

        var replacedRecord = record.replace(new RegExp('(' + query.replace(/\s/g, '|') + ')', 'gi'), function (group) {
            return '<mark class="auto-complete-highlight">' + group + '</mark>';
        });

        if (replacedRecord !== record) {
            return replacedRecord;// This should not happen but just in case there was no match done
        }

        return '';
    },
    /**
     * Clean the search query
     *
     * @param string|null query
     * @return string
     */
    cleanSearchQuery: function (query) {
        if (typeof query !== 'string') {
            return '';
        }
        // replace any chars that could lead to injecting code in our regex
        // remove start or end spaces
        // replace backslashes by an escaped version, use case in search: \myRootFunction
        return query.replace(Doctum.querySearchSecurityRegex, '').trim().replace(/\\/g, '\\\\');
    },
    bootAutoComplete: function () {
        Doctum.autoCompleteJS = new autoComplete(
            {
                selector: '#doctum-search-auto-complete',
                searchEngine: function (query, record) {
                    return Doctum.searchEngine(query, record);
                },
                submit: true,
                data: {
                    src: function (q) {
                        Doctum.markInProgress();
                        return Doctum.loadAutoCompleteData(q);
                    },
                    keys: ['n'],// Data 'Object' key to be searched
                    cache: false, // Is not compatible with async fetch of data
                },
                query: (input) => {
                    return Doctum.cleanSearchQuery(input);
                },
                trigger: (query) => {
                    return Doctum.cleanSearchQuery(query).length > 0;
                },
                resultsList: {
                    tag: 'ul',
                    class: 'auto-complete-dropdown-menu',
                    destination: '#auto-complete-results',
                    position: 'afterbegin',
                    maxResults: 500,
                    noResults: false,
                },
                resultItem: {
                    tag: 'li',
                    class: 'auto-complete-result',
                    highlight: 'auto-complete-highlight',
                    selected: 'auto-complete-selected'
                },
            }
        );
    }
};


document.addEventListener('DOMContentLoaded', Doctum.pagePartiallyLoaded, false);
window.addEventListener('load', Doctum.pageFullyLoaded, false);
